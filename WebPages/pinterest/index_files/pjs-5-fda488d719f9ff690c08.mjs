(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[5],{"0/lC":function(e,t,o){function n(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const o=[];let n,i;for(n=0;n<=t.length;n+=1)o[n]=[n];for(i=0;i<=e.length;i+=1)o[0][i]=i;for(n=1;n<=t.length;n+=1)for(i=1;i<=e.length;i+=1)t.charAt(n-1)===e.charAt(i-1)?o[n][i]=o[n-1][i-1]:o[n][i]=Math.min(o[n-1][i-1]+1,Math.min(o[n][i-1]+1,o[n-1][i]+1));return o[t.length][e.length]}o.d(t,"a",(function(){return n}))},"1kvE":function(e,t,o){o.d(t,"a",(function(){return i}));var n=o("28DW");const i=(e,t,o)=>{Object(n.f)(`unauth.magic_link_login.${e}`,{has_email_data:!!t,has_password_data:!!o})}},"2hay":function(e,t,o){o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return r})),o.d(t,"f",(function(){return s})),o.d(t,"d",(function(){return l})),o.d(t,"e",(function(){return c})),o.d(t,"h",(function(){return d})),o.d(t,"g",(function(){return u})),o.d(t,"c",(function(){return p}));var n=o("37no");const i="274266067164",a=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],r=["public_profile","email","user_likes","user_birthday","user_friends"],s=e=>{return Object(n.c)(`//connect.facebook.net/${(e=>{let t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US"}return t.startsWith("es")&&(t="es_LA"),t.startsWith("ar")&&(t="ar_AR"),t})(e)}/sdk.js`,n.a.FACEBOOK).then(()=>{"undefined"!=typeof window&&window.FB&&window.FB.init({appId:i,status:!0,xfbml:!0,version:"v2.7"})})},l=()=>new Promise(e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)}),c=(e,t={},o)=>new Promise((n,i)=>{if("connected"===e.status){o&&o("success");const{authResponse:{userID:i,accessToken:r}}=e,s={facebook_id:i,facebook_token:r,facebook_autologin:t.autologin||!1},l=`/me?fields=${a.join(",")}`;window.FB.api(l,e=>{n({creds:s,data:{...e,...s,...e.picture&&!e.picture.data.is_silhouette?{image_url:e.picture.data.url}:{}}})})}else{const t=e.status||"unknown";o&&o(`failure.${t}`),i({status:t})}}),d=(e,t)=>{const o=e.data;e.isTrusted&&"string"==typeof o&&0===o.indexOf("_FB_")&&-1!==o.indexOf("type=login_button_dialog_open")&&t&&t("facebook_connect.login_button_dialog_open")},u=()=>{return new Promise(e=>{window.FB.login(e,{scope:r.join(",")})}).then(c)},p=e=>new Promise((t,o)=>{window.FB.api("/me/permissions",n=>{const i=n.data;if(i){const o=i.find(t=>t.permission===e&&"granted"===t.status);return t({hasPerm:!!o})}return o(Error("Failed to call facebook to get permission"))})})},"37no":function(e,t,o){o.d(t,"a",(function(){return s})),o.d(t,"b",(function(){return l})),o.d(t,"c",(function(){return c}));var n=o("7w6Q");const i=20,a=100,r=.01,s=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2});function l(e){return new Promise((t,o)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const n=document.createElement("script");n.src=e,n.async=!0,n.addEventListener("load",t),n.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(n)})}function c(e,t=s.OTHER,o=!1){const l=o?"web":"mweb";return new Promise((o,c)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if(t===s.GPLUS_ONE)if(window.gapi)o();else{const t=setInterval(()=>{window.gapi||e===i?(clearInterval(t),o()):(e+=1,n.default.increment(`${l}.loadScript.gplus_one.tries_${e}`,r))},a)}else if(t===s.FACEBOOK)if(window.FB)o();else{const t=setInterval(()=>{window.FB||e===i?(clearInterval(t),o()):(e+=1,n.default.increment(`${l}.loadScript.facebook.tries_${e}`,r))},a)}else o()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",o),t.addEventListener("error",c),document.getElementsByTagName("head")[0].appendChild(t)}})}},"4NbJ":function(e,t,o){o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return r})),o.d(t,"c",(function(){return p})),o.d(t,"d",(function(){return g})),o.d(t,"e",(function(){return h})),o.d(t,"f",(function(){return m}));var n=o("bKKl"),i=o("37no");const a="postmessage",r="profile email",s="694505692171-31closf3bcmlt59aeulg2j81ej68j6hk.apps.googleusercontent.com",l="com.pinterest",c="offline",d="single_host_origin",u=()=>Object(i.c)("https://apis.google.com/js/client:platform.js",i.a.GPLUS_ONE);function p(e){const t={scope:r,client_id:s,app_package_name:l,access_type:c,cookie_policy:d},o=function(t){e&&e(t)};return new Promise((e,n)=>{u().then(()=>{o("google_script_load"),window&&window.gapi&&window.gapi.auth2?(o("google_script_init_onuse"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_onuse_${e}`)})):(o("google_script_init_exists"),window.gapi.load("auth2",{callback:()=>{o("google_auth2_load_complete"),window.gapi.auth2.init(t).then(t=>{o("google_init_success"),e(t)},({error:e})=>{o("google_init_error"),n(`init_exists_${e}`)})},onerror:({error:e})=>{o("google_auth2_script_load_error"),n(e)},timeout:15e3,ontimeout:()=>{o("google_auth2_script_load_timeout"),n("timeout")}}))})})}function g(e,t,o){return function(e,t,o,i){return new Promise((r,p)=>{t&&Object(n.h)()?p():u().then(()=>{i&&i("google_sdk_load_original"),window.gapi.signin.render(e,{scope:o,clientid:s,apppackagename:l,redirecturi:a,accesstype:c,cookiepolicy:d,callback:e=>{i&&i("google_auth_data_found_original");const o=e.status,n=o&&o.signed_in?{data:{gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at,gplus_autologin:t||!1},signupOptions:{gplus_code:e.code,gplus_id_token:e.id_token,gplus_redirect_uri:a}}:{};o.signed_in&&i&&i("google_user_signed_in_original"),(o.signed_in||t)&&r(n)}})})})}(e,t,r,o)}function h(e,t,o,i=!1){return function(e,t,o,i=!1){return new Promise((s,l)=>{i&&Object(n.h)()?l():(o("google_button_init"),p(o).then(()=>{o("google_sdk_load"),t.signin2.render(e,{scope:r,onsuccess:e=>{o("google_button_success");const t=e.getAuthResponse(!0),n={data:{gplus_id_token:t.id_token,gplus_access_token:t.access_token,gplus_expires_at:t.expires_at,gplus_autologin:i||!1},signupOptions:{gplus_code:"",gplus_id_token:t.id_token,gplus_redirect_uri:a}};s(n)},onfailure:()=>{o("google_button_failure"),l("gapi_signin2_render_error")}})},e=>{o("google_auth2_sdk_init_error"),l(e)}))})}(e,t,o,i)}function m(e,t){return new Promise((e,o)=>{Object(n.h)()?o():(t("google_button_init"),function(e){const t={scope:r,client_id:s,app_package_name:l,access_type:c,cookie_policy:d};return new Promise((o,n)=>{e("google_script_fetch"),Object(i.c)("https://apis.google.com/js/platform.js",i.a.GPLUS_ONE).then(()=>{e("google_script_load"),window.gapi.load("auth2",{callback:()=>{e("google_auth2_load");const i=window.gapi.auth2.init(t);i.then(()=>{e("google_init_success"),o(i)},({error:t})=>{e("google_init_error"),n(`gplus_simple_load_init_exists_${t}`)})},onerror:({error:t})=>{e("google_auth2_script_load_error"),n(`gplus_simple_load_${t}`)},timeout:15e3,ontimeout:()=>{e("google_auth2_script_load_timeout"),n("gplus_simple_load_timeout")}})})})}(t).then(n=>{t("google_sdk_load");const i=n.currentUser.get().getAuthResponse(!0);if(i){t("google_auth_data_found");const o={data:{gplus_id_token:i.id_token,gplus_access_token:i.access_token,gplus_expires_at:i.expires_at,gplus_autologin:!0}};e(o)}else t("google_auth_data_not_found"),o("gplus_user_not_logged_in")},e=>{t("google_auth2_sdk_init_error"),o(e)}))})}},"7KqT":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),r=o("kL1e"),s=o("JW66"),l=o("h4v/"),c=o("Ye/N"),d=o("x/Ro"),u=o("17x9"),p=o.n(u),g=o("DtEZ"),h=o("eOdZ"),m=o("inSI"),b=o("kmwA"),_=o("H3gn"),w=o("i7x9"),f=o("liz/"),E=o("a0jO"),k=o("3NaU"),y=o("IRjL"),S=o("U4JR"),O=o("1kvE"),x=o("a2Qh"),v=o("N9+J"),L=o("D8pe"),C=o("NSVK"),R=o("28DW"),T=o("jsIX");function j(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const F=b.a.settings.PASSWORD_RESET_URL,A="loginmodal",B="email",I="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1",P={alternativeSeparatorContainer:{marginBottom:"9px"},emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:E.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},passwordLinkContainer:{float:"left",marginBottom:"12px",marginTop:"8px"},forgotPassword:{color:"#333333",fontSize:"14px",fontWeight:"bold"},loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"},verticalCenter:{display:"flex",flexDirection:"column",justifyContent:"center"}},M=e=>i.a.createElement(k.a,null,({tokenV3:t,refreshToken:o})=>i.a.createElement(N,Object.assign({},e,{recaptchaTokenV3:t,refreshRecaptchaTokenV3:o})));M.defaultProps={container:"unknown",isAccountSwitch:!1,isPersonalizedLoginFlyout:!1,shouldPreventRegister:!1};class N extends n.Component{constructor(e,t){super(e,t),j(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),j(this,"onLoginWithSuspended",()=>{const{loadingIndicatorCallback:e}=this.props;e&&e(!1),this.setState({accountRecoveryModalType:x.a[s.a.POLICY_VIOLATION_USER],loading:!1})}),j(this,"onloadCallback",()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:I,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:I,callback:"verifyCaptcha"})}catch(e){}}),j(this,"handleButtonClick",(e,t)=>{Object(R.a)("unauth.login.button.clicked");const{viewer:o}=this.props;o.isAuth?Object(S.a)(101,{element:30,login_state:o.isLimitedLogin?2:1,signup_login_method:1}):Object(S.a)(101,{element:30,signup_login_method:1}),this.setState({facebookValidationError:null,googleValidationError:null});let n=Object(m.a)(this.props.email,this.emailValidators);if(n)this.setState({emailValidationError:n}),Object(R.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${A}`);else{this.setState({emailValidationError:null}),n=Object(m.a)(this.props.password,this.passwordValidators);const e=Object(m.a)(this.props.password,this.asciiValidators);n?(this.setState({passwordValidationError:n}),Object(R.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${A}`)):e?(this.setState({passwordValidationError:e}),Object(R.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${A}`),Object(R.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${A}`)):(this.setState({passwordValidationError:null}),this.loginUser(B,void 0,t))}}),j(this,"preventRegister",e=>{e===v.a?this.updateAccountRecoveryModal(C.b.PREVENT_FACEBOOK_REGISTER):e===L.a&&this.updateAccountRecoveryModal(C.b.PREVENT_GOOGLE_REGISTER),this.props.triggerAccountRecoveryMode&&this.props.triggerAccountRecoveryMode(e)}),j(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),j(this,"handleLoginFailure",(e,t,o)=>{const{clearPassword:n,loadingIndicatorCallback:i,viewer:a}=this.props,r=this.getAuxDataLoginMethod(e);Object(R.a)(`unauth.login.error.LOGIN_FAILURE.${e}`),a.isAuth?Object(S.a)(7535,{login_state:a.isLimitedLogin?2:1,signup_login_method:r}):Object(S.a)(7535,{signup_login_method:r}),i(!1),this.props.refreshRecaptchaTokenV3&&this.props.refreshRecaptchaTokenV3();const l=t.http_status===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS?s.a.RESPONSE_CODE_TOO_MANY_REQUESTS:t.api_error_code;if(l===s.a.LOGIN_MFA_REQUIRED)return void C.c.handleLoginMfa(o,t.data,this.props.onLoginWithMfa);if(l===s.a.RESPONSE_CODE_TOO_MANY_REQUESTS&&t.api_error_code===s.a.API_EVENT_BLOCKED_ERROR&&t.message&&"!"!==t.message[t.message.length-1]&&!C.c.isExceedRecaptchaLocalLimit()){if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit";const t=document.getElementsByTagName("script")[0];t.parentNode&&t.parentNode.insertBefore(e,t)}return void this.setState({passwordValidationError:c.a._("Oops! You logged in too quickly. Please try again with the reCAPTCHA.","Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha","Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha"),loading:!1})}const d=C.c.getLoginErrorState(t,"login",this.props.email,w.a,this.updateAccountRecoveryModal);d?(this.setState({accountRecoveryModalType:x.a[l],...d,loading:!1}),n&&d.passwordValidationError&&n()):(c.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(y.a)(c.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))}),j(this,"verifyCaptcha",()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);C.c.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),C.c.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))}),j(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),j(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),j(this,"handleBlur",()=>{this.setState({facebookValidationError:null,googleValidationError:null})}),j(this,"handleMagicLinkClick",()=>{this.setState({magicLinkLoading:!0});const e=Object(m.a)(this.props.email,this.emailValidators);if(e)this.setState({emailValidationError:e,magicLinkLoading:!1});else{this.setState({emailValidationError:null}),h.a.create("UserLoginPasswordlessResource",{username_or_email:this.props.email,is_magic_link:!0}).callCreate().then(()=>{Object(O.a)("link_send_success",this.props.email||"",this.props.password),this.setState({magicLinkLoading:!1}),this.props.toggleMagicLinkConfirmation&&this.props.toggleMagicLinkConfirmation(!0)},e=>{let t;Object(O.a)("link_send_failure",this.props.email||"",this.props.password),e.message?(Object(O.a)("login_with_email_not_registered",this.props.email||"",this.props.password),t=c.a._("The email you entered does not belong to any account.","Error message shown when login email does not exist.","Error message shown when login email does not exist.")):t=c.a._("Sorry! Something went wrong on our end.","error message on login modal telling users we had a problem with their request","error message on login modal telling users we had a problem with their request"),this.setState({emailValidationError:t,magicLinkLoading:!1})})}}),j(this,"handleExistingEmail",e=>{this.setState({isExistingEmail:e})}),j(this,"renderSocialButtons",()=>{const{disablePostSignupNextUrl:e,hideFacebookButton:t,hideGoogleButton:o,isAccountSwitch:n,isPersonalizedLoginFlyout:a,loadingIndicatorCallback:r,nextUrlParam:s,onLoginWithMfa:l,onSocialConnectVerified:d,shouldPreventRegister:u,onFBPhoneOnlyConnectVerified:p}=this.props,g=!t&&i.a.createElement(v.b,{buttonText:c.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:e,isAccountSwitch:n,loadingIndicatorCallback:r,nextUrlParam:s,onSocialConnectVerified:d,onFBPhoneOnlyConnectVerified:p,onLoginWithMfa:l,onLoginWithSuspended:this.onLoginWithSuspended,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,preventRegister:u?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),h=!o&&i.a.createElement(L.b,{container:this.props.container,disablePostSignupNextUrl:e,isAccountSwitch:n,nextUrlParam:s,onLoginWithMfa:l,onLoginWithSuspended:this.onLoginWithSuspended,onSocialConnectVerified:d,tooltip:this.state.googleValidationError,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,preventRegister:u?this.preventRegister.bind(this):void 0,showResponseMessageModal:this.props.showResponseMessageModal}),m=!t&&!o?"8px":"0px";let b=P.socialButtonSeparator,_=P.socialButtonContainer;return a&&(b={...P.socialButtonSeparator,height:m},_={...P.socialButtonContainer,marginTop:"9px"}),i.a.createElement("div",{style:_},g,i.a.createElement("div",{style:b}),h)}),j(this,"renderPasswordResetLink",()=>{const{email:e,viewer:t}=this.props,{isExistingEmail:o,passwordValidationError:n}=this.state;if(n&&i.a.isValidElement(n))return null;let a=P.passwordLinkContainer;return this.props.requestContext.isRTL&&(a={...P.passwordLinkContainer,float:"right"}),i.a.createElement("div",{style:a},i.a.createElement("a",{style:P.forgotPassword,href:F+(e?`?q=${e}`:""),onClick:()=>{o&&Object(R.a)("unauth_web.login_modal.forgot_password_with_existing_email"),Object(R.a)("login_modal_forget_account"),Object(R.d)("click_forget_password"),t.isAuth?Object(S.a)(101,{element:10881,login_state:t.isLimitedLogin?2:1}):Object(S.a)(101,{element:10881})}},c.a._("Forgot your password?","Desktop login modal link for users to recover their account","Desktop login modal link for users to recover their account")))}),j(this,"renderRegisterForm",()=>{const{email:e,hideEmailField:t,inputStyleOverrides:o,isAccountSwitch:n,loginButtonTextOverride:a,magicLinkGroup:r,password:s}=this.props,l=a||c.a._("Log in","Copy on the button to log in","Copy on the button to log in");return i.a.createElement(g.a,{buttonText:l,disableEmailLogin:this.props.disableEmailLogin,email:e,emailText:c.a._("Email","Placeholder text for email field","Placeholder text for email field"),emailValidationError:this.state.emailValidationError,handleExistingEmail:this.handleExistingEmail,handleMagicLinkClick:this.handleMagicLinkClick,hideEmailField:t,hidePasswordField:this.props.hidePasswordField,hideFacebookButton:this.props.hideFacebookButton,hideGoogleButton:this.props.hideGoogleButton,inputStyleOverrides:o,loading:this.state.loading&&!n,magicLinkLoading:this.state.magicLinkLoading,magicLinkGroup:r,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur.bind(this),onEmailChange:this.handleEmailChange.bind(this),onPasswordChange:this.handlePasswordChange,password:s,passwordText:c.a._("Password"),passwordValidationError:this.state.passwordValidationError,renderPasswordResetLink:this.renderPasswordResetLink})}),j(this,"renderOriginalForm",()=>{const{hideFacebookButton:e,hideGoogleButton:t,hidePasswordField:o}=this.props,n=!(o||t&&e);return i.a.createElement(i.a.Fragment,null,this.renderRegisterForm(),n&&i.a.createElement(r.a,null),this.renderSocialButtons())}),j(this,"renderButtons",()=>this.renderOriginalForm()),this.state={accountRecoveryModalType:null,emailValidationError:e.emailValidationError||null,passwordValidationError:e.passwordValidationError||null,facebookValidationError:null,googleValidationError:null,loading:!1,magicLinkLoading:!1,passwordFieldVisible:!1,isExistingEmail:!1,isStopRequest:!1};const o=c.a._("You missed a spot! Don't forget to add your email."),n=c.a._("Hmm...that doesn't look like an email address."),a=c.a._("Passwords can only include alphabet letters, numbers, and common punctuation characters.","Only ASCII characters are allowed for password","Only ASCII characters are allowed for password");this.emailValidators=[Object(T.h)({message:o}),Object(T.c)({message:n})];const l=c.a._("The password you entered is incorrect.");this.passwordValidators=[Object(T.g)({shortPassStr:l,badPassStyle:l,samePasswordStr:l,blackPassStr:l})],this.asciiValidators=[Object(T.b)({message:a})]}componentDidMount(){C.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&!this.props.isAccountSwitch&&(this.props.showResponseMessageModal?this.props.showResponseMessageModal(!1):C.c.handleRedirect(this.props.nextUrlParam)),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}UNSAFE_componentWillReceiveProps(e){const t=e.emailValidationError,o=e.passwordValidationError;let n={};t!==this.props.emailValidationError?n={emailValidationError:t}:o!==this.props.passwordValidationError&&(n={passwordValidationError:o}),this.setState(n)}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}getAuxDataLoginMethod(e){return e===v.a?2:e===L.a?3:e===B?1:""}loginUser(e,t,o){const{container:n,isAccountSwitch:i,showResponseMessageModal:a,viewer:r}=this.props;this.setState({loading:!0}),this.props.loadingIndicatorCallback(!0);const s=t||{username_or_email:this.props.email||"",password:this.props.password},c={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType},u=this.getAuxDataLoginMethod(e);r.isAuth?Object(S.a)(7534,{login_state:r.isLimitedLogin?2:1,signup_login_method:u}):Object(S.a)(7534,{signup_login_method:u}),l.a.getInstance().pauseImpressionsAndFlush(),Object(d.a)(s,c,this.props.requestContext.seoUnauthExperiments,i,o,this.props.recaptchaTokenV3||"default").then((e={})=>{r.isAuth?Object(S.a)(7536,{login_state:r.isLimitedLogin?2:1,signup_login_method:u}):Object(S.a)(7536,{signup_login_method:u}),C.c.storeLoginCredentialsToBrowser(s);let t=this.props.nextUrlParam||C.c.defaultLoginRedirectUrl();if(i&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const o=e.resource_response.data.user;Object(f.b)(o,"email",n),t="/"+o.username}else C.c.storeLoginCredentialsToBrowser(s);a?a(!1):C.c.handleRedirect(t)},t=>this.handleLoginFailure(e,t,s))}render(){const{email:e}=this.props;return i.a.createElement("div",{style:P.loginContainer},i.a.createElement(x.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:e||"",onLoginWithMfa:this.props.onLoginWithMfa}),this.renderButtons(),!this.props.hideTermsOfService&&i.a.createElement(_.a,{dark:!0}))}}N.contextTypes={isAuthenticated:p.a.bool.isRequired,locale:p.a.string.isRequired,loginState:p.a.number,userAgent:p.a.shape({isMobile:p.a.bool.isRequired}).isRequired,hybridTier:p.a.string,pageType:p.a.string},t.a=Object(a.connect)(e=>({viewer:e.viewer}),()=>{})(M)},D8pe:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),r=o("pz/u"),s=o("JW66"),l=o("fZ0m"),c=o("Ye/N"),d=o("x/Ro"),u=o("NSVK"),p=o("17x9"),g=o.n(p),h=o("zUH3"),m=o("DrcS"),b=o("7w6Q"),_=o("0G5S"),w=o("n6mq");function f(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const E="google_auth_id_token",k="google_auth_first_name",y={container:{__style:{backgroundColor:"white",borderRadius:"8px",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:1}},msWebview:{height:"100%",width:"100%"}},S=()=>"undefined"!=typeof window?`${window.location.origin}/connect/gplus/`:"";var O=class extends n.Component{constructor(...e){super(...e),f(this,"state",{googleSignWebviewSource:S()}),f(this,"handleMsWebViewScriptNotify",e=>{if("success"===e.value){const{onDismiss:e,onSignInCallback:t}=this.props,o=Object(_.a)(E),n=Object(_.a)(k);Object(_.b)(E),Object(_.b)(k),b.default.increment("windows.google.connect.handleMsWebViewScriptNotify.success"),t({access_token:"",code:"",expires_at:"",id_token:o,status:{signed_in:!0},first_name:n},window.gapi),e()}else"failure"===e.value&&(b.default.increment("windows.google.connect.handleMsWebViewScriptNotify.failure"),this.props.onError())}),f(this,"msWebViewRef",e=>{e&&e.addEventListener("MSWebViewScriptNotify",this.handleMsWebViewScriptNotify)})}render(){const{onDismiss:e}=this.props,{googleSignWebviewSource:t}=this.state;return i.a.createElement(w.c,{display:"flex",position:"fixed",dangerouslySetInlineStyle:y.container,direction:"column",height:"800px",padding:1,width:"500px"},i.a.createElement(w.c,{alignItems:"end",display:"flex",height:"35px",justifyContent:"end"},i.a.createElement(w.o,{accessibilityLabel:c.a._("Cancel Google Sign-In","Accessibility label for Google Sign-In Dialog bog","Accessibility label for Google Sign-In Dialog bog"),onClick:e,icon:"cancel"})),i.a.createElement(w.c,{flex:"grow"},i.a.createElement("x-ms-webview",{style:y.msWebview,ref:this.msWebViewRef,src:t})))}},x=o("liz/"),v=o("fArA"),L=o("a0jO"),C=o("IRjL"),R=o("/5zs"),T=o("U4JR"),j=o("28DW"),F=o("VL22"),A=o("4NbJ"),B=o("pLLR");function I(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return M}));const P={button:{padding:"1px",marginRight:"0px",textAlign:"left",backgroundClip:"padding-box",display:"block",transition:"opacity .2s linear",position:"relative",outline:"none",width:"100%",marginTop:"0px",backgroundColor:"#EFEFEF",height:"40px",borderRadius:"4px"},icon:{borderRadius:"2px",backgroundColor:"transparent",display:"inline-block",height:"24px",marginLeft:"7px",textAlign:"center",width:"24px"},iconContainer:{position:"relative",margin:"auto",marginTop:"2px"},text:{color:"#333333",display:"inline-block",fontFamily:L.b,position:"absolute",textAlign:"center",top:"50%",fontSize:"16px",transform:"translateY(-50%) translateX(-37px)",verticalAlign:"top",WebkitFontSmoothing:"auto",width:"100%",paddingLeft:"4px"},tooltip:{top:"12px",left:"100%",position:"absolute"}},M="google",N=()=>"undefined"!=typeof window&&void 0!==window.Windows;class W extends n.Component{constructor(...e){super(...e),I(this,"state",{showGoogleSigninWebview:!1}),I(this,"onSignInCallback",(e,t)=>{const o={gplus_id_token:e.id_token,gplus_access_token:e.access_token,gplus_expires_at:e.expires_at};if(e.status.signed_in)Object(j.a)("unauth_web.google_connect.manual.success"),this.login(o).then((e={})=>{if(this.props.isAccountSwitch&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const t=e.resource_response.data.user;Object(x.b)(t,M,this.props.container)}this.onLoginSuccess()},n=>{if(n.api_error_code===s.a.LOGIN_VOLUNTARILY_DEACTIVATED_USER)this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(n);else if(n.api_error_code===s.a.LOGIN_MFA_REQUIRED)this.props.onLoginWithMfa&&this.props.onLoginWithMfa(o,n.data);else if(n.api_error_code===s.a.LOGIN_USER_NOT_FOUND){if(this.props.preventRegister)return void this.props.preventRegister(M);this.onLoginError(n,e,t)}else n&&n.api_error_code&&Object(j.a)(`google_connect_button.failed_login.${n.api_error_code}`),n.api_error_code===s.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(C.a)(c.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc.","error message when user failed to login caused by suspend/deactivated etc."))});else{const t=e?e.error:"unknown";Object(j.a)(`unauth_web.google_connect.failure.${String(t)}`)}}),I(this,"onLoginSuccess",()=>{const{showResponseMessageModal:e}=this.props;e?e(!1):u.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),I(this,"shouldRequireAge",()=>{const{country:e}=this.context;return Object(F.d)(e)||Object(F.c)(e)}),I(this,"handleGoogleConnectButtonClick",()=>{Object(j.d)("press_google_login"),Object(j.a)("unauth_web.google_connect.manual.attempt"),l.a.get(e=>{Object(A.c)(e=>Object(j.a)(`unauth_web.google_connect.manual.init.${e}`)).then(t=>{N()&&this.setState({showGoogleSigninWebview:!0}),Object(j.a)("unauth_web.google_connect.manual.init"),t.signIn({scope:A.b}).then(t=>{Object(j.a)("unauth_web.google_connect.manual.success");const o={...t.getAuthResponse(),code:"",status:{signed_in:!0}};this.onSignInCallback(o,e)},({error:e})=>{Object(j.a)(`unauth_web.google_connect.manual.failure.${String(e)}`)})},e=>{Object(j.a)("unauth_web.google_connect.error.auth2_sdk_init_error")}).catch(e=>{Object(j.a)(`unauth_web.gapi_auth2_load.error.${e||"unknown"}`),Object(C.a)(c.a._("Sorry, you need to select an account if you want to log in with Google.","error message when user failed to login/signup because they did not complete the Google step.","error message when user failed to login/signup because they did not complete the Google step."))})})}),I(this,"handleOnDimisssWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1})}),I(this,"handleOnErrorWindowsPWAWebview",()=>{this.setState({showGoogleSigninWebview:!1}),Object(C.a)(c.a._("Sorry, there was an error signing in with Google.","error message when user failed to login/signup using Google sign-in.","error message when user failed to login/signup using Google sign-in."))}),I(this,"handleSignupSuccess",()=>{const{disablePostSignupNextUrl:e,nextUrlParam:t,showResponseMessageModal:o}=this.props;this.contextLogSignupLoginEvent(7487),o?o(!0):u.c.handleSignupRedirect(t,e)}),I(this,"handleSignupFailure",()=>{this.contextLogSignupLoginEvent(7488)}),I(this,"renderTooltip",e=>e?i.a.createElement("div",{style:P.tooltip},i.a.createElement(h.a,{message:e})):null)}componentDidMount(){"undefined"!=typeof window&&(window.googleOnSignInCallbacks?window.googleOnSignInCallbacks.push(this.onSignInCallback):window.googleOnSignInCallbacks=[this.onSignInCallback]),this.readyForConnect=!1,this.autoLogin=!1,window.googleConnectButtonContainer=this.props.container?this.props.container:""}componentWillUnmount(){if("undefined"!=typeof window&&window.googleOnSignInCallbacks){const e=window.googleOnSignInCallbacks.indexOf(this.onSignInCallback);e>=0&&window.googleOnSignInCallbacks.splice(e,1)}delete window.googleConnectButtonContainer}onLoginError(e,t,o){const{onSocialConnectVerified:n,requestContext:i,showSignupWelcomeLoadingFn:a,showResponseMessageModal:r}=this.props,s={gplus_code:t.code,gplus_id_token:t.id_token,gplus_redirect_uri:A.a,...void 0!==t.first_name?{gplus_first_name:t.first_name}:{}},l={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};if(n&&this.shouldRequireAge())return void n(F.a.GOOGLE,{},{...s,...l});const c=new R.c(i,"web_unauth_gplus_welcome_v2").enabled();i.experiments.flush(),!r&&a&&c&&a(!0),m.a.register({...s,...l,recapToken:null}).then(this.handleSignupSuccess,this.handleSignupFailure)}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(T.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:3}):Object(T.a)(e,{signup_login_method:3})}login(e){const t={container:window.googleConnectButtonContainer,hybridTier:this.context.hybridTier,page:this.context.pageType};return Object(d.a)(e,t,this.props.requestContext.seoUnauthExperiments,this.props.isAccountSwitch)}logo(e){return i.a.createElement("svg",{height:e,viewBox:"0 0 512 512",width:e,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("g",{fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M482.56 261.36c0-16.73-1.5-32.83-4.29-48.27H256v91.29h127.01c-5.47 29.5-22.1 54.49-47.09 71.23v59.21h76.27c44.63-41.09 70.37-101.59 70.37-173.46z",fill:"#4285f4"}),i.a.createElement("path",{d:"M256 492c63.72 0 117.14-21.13 156.19-57.18l-76.27-59.21c-21.13 14.16-48.17 22.53-79.92 22.53-61.47 0-113.49-41.51-132.05-97.3H45.1v61.15c38.83 77.13 118.64 130.01 210.9 130.01z",fill:"#34a853"}),i.a.createElement("path",{d:"M123.95 300.84c-4.72-14.16-7.4-29.29-7.4-44.84s2.68-30.68 7.4-44.84V150.01H45.1C29.12 181.87 20 217.92 20 256c0 38.08 9.12 74.13 25.1 105.99l78.85-61.15z",fill:"#fbbc05"}),i.a.createElement("path",{d:"M256 113.86c34.65 0 65.76 11.91 90.22 35.29l67.69-67.69C373.03 43.39 319.61 20 256 20c-92.25 0-172.07 52.89-210.9 130.01l78.85 61.15c18.56-55.78 70.59-97.3 132.05-97.3z",fill:"#ea4335"}),i.a.createElement("path",{d:"M20 20h472v472H20V20z"})))}render(){const{buttonText:e,inline:t,styleOverrides:o}=this.props,{showGoogleSigninWebview:n}=this.state;let a=P.button;t&&(a={...a,width:"48%",display:"inline-block"}),o&&o.button&&(a={...a,...o.button}),new R.c(this.props.requestContext,"mweb_web_unauth_lego_button").enabled()&&(a={...a,borderRadius:"20px"});const s={...P.icon,...o&&o.icon||{}},l={...P.text,...o&&o.text||{}},d=e||c.a._("Continue with Google");return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{id:"googleConnectButton",className:"GoogleConnectButton",onClick:this.handleGoogleConnectButtonClick,styleOverrides:a,type:"button"},i.a.createElement("div",{style:s},i.a.createElement("div",{style:P.iconContainer},this.logo(20))),i.a.createElement("span",{style:l},d),this.renderTooltip(this.props.tooltip)),n&&N()&&i.a.createElement(O,{onDismiss:this.handleOnDimisssWindowsPWAWebview,onError:this.handleOnErrorWindowsPWAWebview,onSignInCallback:this.onSignInCallback}))}}I(W,"defaultProps",{inline:!1});W.contextTypes={country:g.a.string,hybridTier:g.a.string,pageType:g.a.string};t.b=Object(v.compose)(B.e,Object(a.connect)(e=>({viewer:e.viewer})))(W)},DrcS:function(e,t,o){var n=o("gxu6"),i=o("dg5e"),a=o("JW66"),r=o("+NLT"),s=o("m2Wt"),l=o("h4v/");var c=o("zpPL");var d=o("Ye/N"),u=o("E+oP"),p=o.n(u),g=o("eOdZ"),h=o("eqAH"),m=o("QLqj"),b=o("kmwA"),_=o("28DW"),w=o("zwad"),f=o("mBfy"),E=o("fAMq"),k=o("VL22"),y=o("CzMn"),S=o("53sj");let O=0;const x=(e,t)=>{Object(_.a)(`web_cross_domain_register.${e}.${Object(k.b)(t)}`)},v={register(e){const t={...e},o=m.b.localStorage.getItem("visitedPages");o&&(t.visited_pages=JSON.stringify(o));const n=m.b.localStorage.getItem("visitedPinLandingPagesBeforeLogin");if(n){const e=[];for(const t of n)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(t.visited_pages=JSON.stringify(e.concat(o||[])))}if(t.user_behavior_data=Object(y.b)(),v.shouldPerformCrossDomainRegister(t)){if(-1!==b.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(r.a.instance.origin))return Object(_.a)("unauth_cross_domain_register_debugging_counter"),v.crossDomainRegister(t)}return v.getResource(t).callCreate().then(v.onRegisterSuccess.bind(null,t),v.onRegisterError.bind(null,t))},crossDomainRegister:e=>(x("attempt",e),i.default.registerUser(e).then(t=>{v.onRegisterSuccess(e,t);const o=t.data||"";if(o)return x("success_with_token",e),i.default.exchangeTokenAndSetSession(o,!0).then(t=>{x("success_token_exchanged",e)},t=>{throw x("success_token_not_exchanged",e),t});{x("success_without_token",e);const t=d.a._("We were able to create your account, but there was a problem logging you in. Try refreshing the page to continue.");throw new Error(t)}},t=>{x("failure",e),v.onRegisterError(e,t)})),onRegisterSuccess:(e,t)=>(Object(S.a)("signup"),n.c("galae"),n.c("fbalae"),Object(h.a)(),n.b("ujr","1"),v.trackRegister(e),t),onRegisterError(e,t){if(t.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(Object(_.a)("multi_step_set_age_restrict_cookie"),n.b("r_r","1",87600),n.b("_pinterest_pfob","disabled")),(p()(t.api_error_code)||[a.a.API_SERVER_ERROR,a.a.API_REQUEST_TIMEOUT].includes(t.api_error_code))&&O<3)return Object(_.a)(`unauth_web.signup_retry_error.${String(t.api_error_code)}.${String(e.container)}`),O+=1,v.register(e);throw t},trackRegister(e){let t;switch(e.container){case"home_page":t=s.a.fromEventType(1750),Object(_.a)("signup_home_page");break;case"mweb_homepage":t=s.a.fromEventType(1750),Object(_.a)("signup_mweb_home_page");break;case"plain_signup_modal":t=s.a.fromEventType(1751),Object(_.a)("signup_plain_modal");break;case"closeup_signup_modal":t=s.a.fromEventType(1752),Object(_.a)("signup_closeup_modal");break;case"widescreen_signup_modal":t=s.a.fromEventType(1753),Object(_.a)("signup_widescreen_modal");break;case"pinit_button_landing":t=s.a.fromEventType(1755),Object(_.a)("signup_pinit_button_landing");break;case"inspired_banner":Object(_.a)("signup_inspired_banner");break;case"category_jump_banner":Object(_.a)("signup_category_jump_banner");break;case"send_pin_banner":t=s.a.fromEventType(1756),Object(_.a)("send_pin_banner");break;default:t=s.a.fromEventType(1754),Object(_.a)("signup_unknown_placement")}const o=e.container||"container_unknown";Object(_.a)("signup.container."+o);const n=e.signupSource||"signupSource_unknown";Object(_.a)("signup.source."+n),t&&l.a.getInstance().addEvent(t);const i=document.referrer;let a;a=i?i.indexOf("/t.co/")>-1?"twitter":i.indexOf("google.")>-1?"google":i.indexOf("bing.")>-1?"bing":i.indexOf("facebook.")>-1?"facebook":"other":"direct",Object(_.a)("signup_referrer."+a);const d=w.a.getQueryStringParams().referrer||function(){const e=c.a.instance.getState().ui.mainComponent.initial;return e?e.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase():null}();Object(_.a)("signup_referrer_module."+String(d));const u=r.a.instance.user_agent_platform;"ios"===u?Object(_.a)("signup_mweb.iphone_web"):"ipad"===u?Object(_.a)("signup_mweb.ipad_web"):"android"===u&&Object(_.a)("signup_mweb.android_web");const p=e.hybridTier||"tier_unknown",g=e.page||"page_unknown",h=Object(k.b)(e);Object(_.a)(`web_signup.${h}.success.${g}.${o}.${a}.${p}`)},getResource:e=>g.a.create("UserRegisterResource",e),attemptFacebookRegistration:(e,t=!1)=>v.verifyFacebookEmailExists(t).then(o=>{if(!o.email&&!t)return Promise.reject({error:new Error("Email required to sign up."),socialConnectData:o});const n=v.buildFacebookRegistrationResourceOptions(o);return v.register({...n,...e})}),verifyFacebookEmailExists:e=>v.fetchFacebookUserData().then(t=>t.email||e?Promise.resolve(t):Promise.reject({error:new Error("Email required to sign up."),socialConnectData:t})),buildFacebookRegistrationResourceOptions:e=>({first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.image_url,facebook_id:e.id,facebook_token:e.access_token||"",birthday:String(Object(E.d)(e.birthday||""))}),fetchFacebookUserData:()=>(()=>o.e("FacebookCommon").then(o.bind(null,"UTsl")))().then(({default:e})=>new Promise((t,o)=>{e.ensureInit(e=>{e.getLoginStatus(n=>{if(!n.authResponse)return o(new Error("not authed"));const i="/me?fields="+["picture.type(large)","id","first_name","last_name","email","gender","birthday"].join(",");e.api(i,e=>!e||e.error?o(new Error("FB.api errored: "+e.error)):(e.picture&&e.picture.data&&e.picture.data.url&&!e.picture.data.is_silhouette&&(e.image_url=e.picture.data.url),t(e)))},!0)},f.default)})),shouldPerformCrossDomainRegister:e=>!(e.facebook_id||e.gplus_code||e.gplus_id_token||e.google_open_id_token)&&!!e.email};t.a=v},DtEZ:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("i8i4"),r=o("pz/u"),s=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"],l=o("/MKj");const c="gmail.com",d="yahoo.com",u="hotmail.com",p={AR:[c,u,"yahoo.com.ar"],AU:[c,u,"bigpond.com"],BR:[c,u,"yahoo.com.br"],CA:[c,u,d],DE:[c,"web.de","gmx.de"],ES:[c,u,"hotmail.es"],FR:[c,"hotmail.fr","orange.fr"],GB:[c,"hotmail.co.uk","hotmail.com"],IN:[c,d,"rediffmail.com"],IT:[c,"libero.it","hotmail.it"],JP:[c,"yahoo.co.jp","ezweb.ne.jp"],MX:[c,u,"outlook.com"],US:[c,u,d],DEFAULT:[c,u,d]};var g=o("n6mq");const h={emailSuggestionDropdown:{border:"1px solid rgb(181, 181, 181)",zIndex:1}};var m=Object(l.connect)(({viewer:e})=>({country:e.country||""}))(e=>{const{country:t,email:o,emailFieldElement:n,handleEmailSuggestionClick:a,showUsername:r}=e,s=function(e){return e&&e.toUpperCase()in p?p[e.toUpperCase()]:p.DEFAULT}(t);let l=window.innerWidth-32;return n&&(l=n.getBoundingClientRect().width),i.a.createElement(g.c,{color:"white",dangerouslySetInlineStyle:{__style:h.emailSuggestionDropdown},direction:"column",display:"flex",position:"absolute",width:l},s.map(e=>{const t=(o||"").concat(e),n=r?t:e;return i.a.createElement(g.c,{key:n},i.a.createElement("div",{role:"button",onMouseDown:()=>{a(t)},tabIndex:0},i.a.createElement(g.c,{paddingX:3,paddingY:2},i.a.createElement(g.K,null,n))))}))}),b=o("Ye/N"),_=o("0/lC"),w=o("mt4P"),f=o("XCz/"),E=o("vvax"),k=o("/5zs"),y=o("1kvE"),S=o("28DW"),O=o("pLLR");function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const v={captcha:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"},signupButton:{width:"100%"},wrapperVisible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",display:"flex",opacity:1,alignItems:"center",justifyContent:"space-between",height:"100%"},wrapperHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",display:"none",opacity:0}};t.a=Object(O.e)(class extends n.Component{constructor(...e){super(...e),x(this,"state",{domainError:"",emailFieldElement:null,newEmail:"",showAgeInput:this.props.showAgeInput,showEmailDomainSuggestions:!1}),x(this,"updateEmail",()=>{const{onEmailChange:e,onTypoSuggestionClick:t}=this.props;this.state.newEmail&&(e({target:{value:this.state.newEmail}}),t(),Object(S.a)("unauth.email_domain_typo_suggestion.clicked"))}),x(this,"getEmailFieldElement",()=>{const e=Object(a.findDOMNode)(this.emailTextFieldRef);return e&&e instanceof HTMLElement?e.querySelector("input"):null}),x(this,"handleEmailChange",e=>{const{onEmailChange:t}=this.props,{showEmailDomainSuggestions:o}=this.state;if(t&&t(e),e&&e.target&&e.target.value)if(o)this.setState({showEmailDomainSuggestions:!1});else if(e.target.value.endsWith("@")){const e=this.getEmailFieldElement();this.setState({showEmailDomainSuggestions:!0,emailFieldElement:e})}}),x(this,"handleEmailSuggestionClick",e=>{const{onEmailChange:t}=this.props;Object(S.a)("web_unauth_email_suggestions.signup_modal.click"),this.setState({showEmailDomainSuggestions:!1}),t({target:{value:e}})}),x(this,"handleEmailBlur",()=>{const{checkEmailExistsWithCompletion:e,email:t,handleExistingEmail:o,isSignupForm:n,onEmailBlur:i}=this.props,{showAgeInput:a,showEmailDomainSuggestions:r}=this.state;i&&i(),r&&this.setState({showEmailDomainSuggestions:!1}),t&&t.length>0&&e&&e(t,()=>{n&&Object(S.a)("web.unauth.signup.email_entered"),n&&a&&this.setState({showAgeInput:!1}),o&&o(!0)},()=>{n&&!a&&this.setState({showAgeInput:!0}),o&&o(!1)});const l=t&&-1!==t.indexOf("@")?t.split("@"):[];if(t&&t!==this.state.newEmail||this.setState({domainError:""}),t&&l&&t.length<60){if(2===l.length){const e=l[1],t=e&&-1!==e.indexOf(".")?e.split("."):[];if(t.length>=2&&"gmail"===t[0])if("com"!==t.slice(1).join(".")){const e=l[0]+"@gmail.com";this.setEmailTypoSuggestion(e)}else this.setState({domainError:""})}const e=l[1]&&s.includes(l[1])?null:l[1]&&s.map(e=>{const t=Object(_.a)(e,l[1]);return 2===t||1===t?e:null}).filter(e=>"string"==typeof e);if(e&&e.length){const t=e[0]?`${l[0]}@${e[0]}`:"";this.setEmailTypoSuggestion(t)}}}),x(this,"handleSignUp",e=>{this.state.showAgeInput?Object(S.d)("press_signup_continue"):Object(S.d)("press_login_continue")}),x(this,"renderDefaultLoginButton",(e,t)=>{const{email:o,buttonText:i,buttonTextLabel:a,password:s}=this.props,l=new k.c(this.props.requestContext,"mweb_web_unauth_lego_button").enabled();let c=v.signupButton;return l&&(c={...v.signupButton,borderRadius:"20px"}),n.createElement("div",{"data-test-id":"registerFormSubmitButton",onClick:t?()=>Object(y.a)(`login_click_${e?"disabled":"enabled"}`,o,s):()=>{}},n.createElement(r.a,{accessibilityLabel:a,className:"red SignupButton",disabled:e,styleOverrides:c,type:"submit",onClick:this.handleSignUp},n.createElement("div",null,i)))}),x(this,"renderMagicLinkButton",e=>{const{buttonTextLabel:t,email:o,handleMagicLinkClick:i,magicLinkLoading:a,password:s}=this.props;return n.createElement("div",{onClick:()=>Object(y.a)(`passwordless_click_${e?"disabled":"enabled"}`,o,s)},n.createElement(r.a,{accessibilityLabel:t,className:"red SignupButton",disabled:e,loading:a,styleOverrides:v.signupButton,onClick:i},n.createElement(g.c,null,b.a._("Log in without password","text on button allowing users to get an email to login","text on button allowing users to get an email to login"))))}),x(this,"handleFocusPassword",e=>{Object(S.d)("focus_password")})}static getDerivedStateFromProps(e,t){return e.email===t.newEmail?{domainError:"",newEmail:""}:null}setEmailTypoSuggestion(e){const t=Object(E.b)(b.a._("Did you mean {{ newEmail }}?"),{newEmail:n.createElement(g.K,{color:"red",inline:!0,key:"err_text",size:"md",weight:"bold"},e)});this.setState({domainError:t,newEmail:e}),this.props.email===e?this.setState({domainError:""}):Object(S.a)("unauth.email_domain_typo_suggestion.shown")}renderLoginButtons(){const{email:e,magicLinkGroup:t}=this.props,o=this.props.disableEmailLogin||!1,i=""!==this.props.password,a=this.renderDefaultLoginButton(o||!i,!0),r=this.renderMagicLinkButton(i||""===e);return t&&t.startsWith("enabled_login_primary")?n.createElement(g.c,null,a,r):t&&t.startsWith("enabled_magic_link_primary")?n.createElement(g.c,null,r,a):t&&t.startsWith("enabled_inactive_login")?a:this.renderDefaultLoginButton(o)}render(){const{age:e,ageValidationError:t,disableEmailLogin:o,email:i,emailFieldHasError:a,emailLabel:r,emailText:s,emailValidationError:l,hideEmailField:c,hideFacebookButton:d,hideGoogleButton:u,hidePasswordField:p,inputStyleOverrides:h,onAgeBlur:_,onAgeChange:E,onButtonClick:k,onPasswordChange:y,password:S,passwordFieldVisible:O,passwordText:x,passwordValidationError:L,renderPasswordResetLink:C,suppressFocus:R}=this.props,{emailFieldElement:T,showEmailDomainSuggestions:j}=this.state;let F=v.wrapperVisible;!1===O&&(F=v.wrapperHidden);let A=l;return A||!p&&!o||(d||u?!d&&u?A=b.a._("Your account is connected to Facebook - use the Facebook button to log in","Customized desktop login for users with Facebook","Customized desktop login for users with Facebook"):d&&!u&&(A=b.a._("Your account is connected to Google - use the Google button to log in","Customized desktop login for users with Google","Customized desktop login for users with Google")):A=b.a._("Your account is connected to Facebook and Google - use the buttons to log in","Customized desktop login for users with FB and Google","Customized desktop login for users with FB and Google")),n.createElement("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),k(e)}},!c&&n.createElement(g.c,{"data-test-id":"emailInputField"},n.createElement(w.a,{accessibilityLabel:r,autoComplete:"username",fieldsetStyleOverrides:{marginBottom:"7px"},focused:!R,hasError:!j&&(!!l||a),domainError:!j&&this.state.domainError,id:"email",inputStyleOverrides:h,name:"id",onBlur:this.handleEmailBlur,onChange:this.handleEmailChange,placeholder:s,ref:e=>{this.emailTextFieldRef=e},tooltip:!j&&A,type:"email",value:i,updateEmail:this.state.domainError?this.updateEmail:null,useGestalt:!0})),!c&&j&&n.createElement(f.a,{name:"web_unauth_email_suggestions"},({group:e})=>["enabled","enabled_username","employees"].includes(e)&&n.createElement(n.Fragment,null,n.createElement(m,{email:i,emailFieldElement:T,handleEmailSuggestionClick:this.handleEmailSuggestionClick,showUsername:"enabled_username"===e}))),!p&&n.createElement(n.Fragment,null,n.createElement(g.c,{"data-test-id":"passwordInputField"},n.createElement(w.a,{autoComplete:"new-password",disabled:o,hasError:!!L,id:"password",inputStyleOverrides:{...h,...F},name:"password",onChange:y,placeholder:x,tooltip:L,type:"password",value:S,useGestalt:!0,onFocus:this.handleFocusPassword})),C?C():null),!p&&this.state.showAgeInput?n.createElement(g.c,{"data-test-id":"ageInputField"},n.createElement(w.a,{accessibilityLabel:"age",autoComplete:"off",dataTestId:"ageInputField",fieldsetStyleOverrides:{marginTop:"4px"},hasError:!!t,id:"age",inputStyleOverrides:{...h},name:"age",onBlur:_,onChange:E,placeholder:b.a._("Age"),tooltip:t,type:"text",value:e,useGestalt:!0})):null,window.recaptchaCount>0?n.createElement("div",{id:`recaptcha_placeholder_${window.recaptchaCount}`,className:"g-recaptcha",style:v.captcha}):null,!p&&this.renderLoginButtons())}})},F3od:function(e,t,o){var n=o("q1tI"),i=o("Q0dO"),a=o("n6mq");t.a=class extends n.Component{render(){const{description:e,error:t,id:o,label:r,required:s=!1,onLabelTouch:l,...c}=this.props;return n.createElement(i.a,{description:e,error:t,id:o,label:r,required:s,onLabelTouch:l},n.createElement(a.M,Object.assign({},c,{hasError:!!t,id:o,ref:e=>{this.textfield=e?e.textfield:null},size:"lg"})))}}},H3gn:function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("q1tI"),i=o.n(n),a=o("xdpg"),r=o("Ye/N"),s=o("kmwA"),l=o("pLLR");const c={tosContainer:{marginTop:"16px"},tosCommon:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear"},tosLarge:{color:"#333",fontSize:"12px",lineHeight:"12px"},tosDark:{color:"#767676",width:"224px"},tosLight:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}};function d({dark:e,large:t,noContainer:o,dynamicTopMargin:n,disableWordBreak:d}){const{country:u}=Object(l.d)(),p=s.a.settings.EU_COUNTRIES;let g={...c.tosCommon,...c.tosDark};e||(g={...c.tosCommon,...c.tosLight});let h,m=o?{}:c.tosContainer;return n&&(m={...m,marginTop:"3%"}),d&&(m={...m,hyphens:"none"}),t&&(g={...g,...c.tosLarge}),h=p.indexOf(u)>-1?a.c(r.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}">Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}">Privacy Policy</a> and <a href="{{ cookie_url }}"> Cookie use</a>.'),{tos_url:s.a.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:s.a.settings.ABOUT_PRIVACY_PLAIN_URL,cookie_url:s.a.settings.ABOUT_COOKIE_URL}):a.c(r.a._('By continuing, you agree to Pinterest\'s <a data-test-id="tos" href="{{ tos_url }}" target="_blank" >Terms of Service</a>, <a data-test-id="privacy" href="{{ privacy_policy_url }}" target="_blank">Privacy Policy</a>'),{tos_url:s.a.settings.ABOUT_TERMS_PLAIN_URL,privacy_policy_url:s.a.settings.ABOUT_PRIVACY_PLAIN_URL}),i.a.createElement("div",{style:m},i.a.createElement("span",{className:e?"":"TermsOfService__light",style:g},i.a.createElement("span",{dangerouslySetInnerHTML:{__html:h}})))}},"LSg/":function(e,t,o){var n=o("sgOq"),i=o("eOdZ"),a=o("U4JR");t.a=({usernameOrEmail:e,logOptions:t,callBack:o,ErrorCallback:r})=>{t&&Object(a.a)(n.a.requestEnd,t),i.a.create("UserResetPasswordResource",{username_or_email:e}).callCreate({showError:!1}).then(e=>{t&&Object(a.a)(n.a.request,t),o&&o()},e=>{r&&r(e)})}},"N9+J":function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("/MKj"),r=o("pz/u"),s=o("JW66"),l=o("Ev07"),c=o("n6mq");const d={tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}};function u({anchor:e,message:t,children:o}){const[a,r]=Object(n.useState)(!!t);return Object(n.useEffect)(()=>{r(!!t)},[t]),a&&t?i.a.createElement(c.k,{anchor:e,color:"darkGray",idealDirection:"right",onDismiss:()=>r(!0),shouldFocus:!1,size:"md"},i.a.createElement(c.c,{column:12,padding:3},o?i.a.createElement("span",null,o):i.a.createElement("span",{dangerouslySetInnerHTML:{__html:t},style:d.tooltipText}))):null}var p=o("Ye/N"),g=o("x/Ro"),h=o("NSVK"),m=o("17x9"),b=o.n(m),_=o("kmwA"),w=o("zUH3"),f=o("DrcS"),E=o("liz/"),k=o("fArA"),y=o("a0jO"),S=o("fAMq"),O=o("IRjL"),x=o("/5zs"),v=o("U4JR"),L=o("7zvO"),C=o("28DW"),R=o("2hay"),T=o("VL22"),j=o("pLLR");function F(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return B}));const A={button:{backgroundClip:"padding-box",backgroundColor:"#1877F2",borderRadius:"8px",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%"},fbLogo:{__style:{borderRadius:"12px",paddingTop:"3px",paddingLeft:"2px",paddingRight:"2px",marginLeft:"1px",width:"24px"}},container:{position:"relative"},tooltip:{top:"12px",left:"100%",position:"absolute"},text:{color:"#fff",display:"inline-block",fontFamily:y.b,fontSize:"15px",fontWeight:"bold",letterSpacing:"normal",lineHeight:"16px",marginRight:"31px",paddingTop:"5px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},fbProfileButton:{height:"40px",textAlign:"left"}},B="facebook",I=18,P=100;class M extends n.Component{constructor(...e){super(...e),F(this,"getContainerName",()=>{let e;return window.fbConnectButtonContainerStack&&window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]&&(e=window.fbConnectButtonContainerStack[window.fbConnectButtonContainerStack.length-1]),e}),F(this,"profilePicButtonConnectSuccess",e=>{const{container:t,handlePostSuccessConnect:o,isAccountSwitch:n,loadingIndicatorCallback:i,onLoginWithMfa:a,onLoginWithSuspended:r,preventRegister:l,requestContext:{seoUnauthExperiments:c},isBusiness:d=!1}=this.props;i&&i(!0);const u={facebook_id:e.userID,facebook_token:e.accessToken},h={container:this.getContainerName(),hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:d};Object(g.a)(u,h,c,n).then((e={})=>{if(n&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const o=e.resource_response.data.user;Object(E.b)(o,B,t)}Object(C.a)("login.facebook."+Object(L.b)()),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin(),o&&o()},e=>{if(this.contextLogSignupLoginEvent(7535),e.api_error_code===s.a.LOGIN_MFA_REQUIRED)i&&i(!1),Object(C.a)("login.facebook."+Object(L.b)()),a&&a(u,e.data);else if(e.api_error_code===s.a.LOGIN_USER_NOT_FOUND||e.api_error_code===s.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(l)return void l(B);this.profilePicButtonRegisterWithFacebook(e,u,h)}else e&&e.api_error_code&&Object(C.a)(`facebook_button.failed_login_${e.api_error_code}`),e&&e.api_error_code===s.a.POLICY_VIOLATION_USER&&r?r():Object(O.a)(p.a._("Sorry, we can't log you in."))}),this.contextLogSignupLoginEvent(7534)}),F(this,"statusChangeCallback",e=>{let t;"connected"===e.status?(Object(C.a)("web.facebook_connect_button.login_status.connected"),this.profilePicButtonConnectSuccess(e.authResponse),t="success"):"not_authorized"===e.status?(Object(C.a)("web.facebook_connect_button.cancel.not_authorized"),Object(O.a)(p.a.commonStrings.connectError),t="not_authorized"):(Object(C.a)("web.facebook_connect_button.cancel.unknown"),Object(O.a)(p.a.commonStrings.connectError),t="other_error");const{handlePostConnectClick:o}=this.props;o&&o(t)}),F(this,"handleConnectClick",()=>{Object(C.a)("fallback_facebook_button.click"),Object(C.d)("press_facebook_login_fallback"),Object(C.a)("unauth_web.facebook_connect.manual.attempt"),(new L.a).connect(T.a.FACEBOOK,{success:e=>{this.onFacebookConnectSuccess(e)},error:e=>{Object(C.a)("unauth_web.facebook_connect.manual.failure"),e.alertedUpstream||Object(O.a)(p.a.commonStrings.connectError)},rerequest_facebook_email:this.rerequestFacebookEmail})}),F(this,"profilePicButtonRegisterWithFacebook",(e,t,o)=>{const{country:n}=this.context,{disablePostSignupNextUrl:i,loadingIndicatorCallback:a,nextUrlParam:r,onFBPhoneOnlyConnectVerified:s,onFBEmailDeniedPerm:l,onSocialConnectVerified:c,requestContext:d,showSignupWelcomeLoadingFn:u,showResponseMessageModal:g}=this.props,m=()=>{a&&a(!1),e?(this.contextLogSignupLoginEvent(7488),Object(O.a)(p.a._("Email required for registration."))):this.navigate("/join/register/facebook/")},b=e=>{if(s&&e.socialConnectData&&!e.socialConnectData.email){const n=Object.assign({},t,o);s(T.a.FACEBOOK,e.socialConnectData,n)}else e.socialConnectData&&!e.socialConnectData.email?Object(R.c)("email").then(({hasPerm:e})=>{!e&&l?l():m()},m):m()},_=e=>{this.contextLogSignupLoginEvent(7487);const{showResponseMessageModal:t}=this.props;t?t(!0):h.c.handleSignupRedirect(r,i)},w=Object(T.d)(n)||Object(T.c)(n);c&&w?f.a.verifyFacebookEmailExists().then(e=>{if(e.email)if(e.birthday&&Object(S.f)(e.birthday,I)){const e=new x.c(d,"web_unauth_fb_welcome_v2").enabled();d.experiments.flush(),!g&&u&&e&&u(!0),f.a.attemptFacebookRegistration(Object.assign({},t,o)).then(_,b),this.contextLogSignupLoginEvent(7537)}else{a&&a(!1);const n=Object.assign({},t,o);c(T.a.FACEBOOK,e,n)}else f.a.attemptFacebookRegistration({...t,...o}).then(_,b)},b):f.a.attemptFacebookRegistration({...t,...o}).then(_,b)}),F(this,"registerWithFacebook",(e,t,o)=>{const{country:n}=this.context,{disablePostSignupNextUrl:i,nextUrlParam:a,onSocialConnectVerified:r,onFBPhoneOnlyConnectVerified:s}=this.props,l=n=>{if(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),s&&n.socialConnectData&&!n.socialConnectData.email){const e=Object.assign({},o,t);s(T.a.FACEBOOK,n.socialConnectData,e)}else e?(this.contextLogSignupLoginEvent(7488),this.rerequestFacebookEmail=!0,Object(O.a)(p.a._("Email required for registration."))):this.navigate("/join/register/facebook/")};r&&Object(T.d)(n)?f.a.verifyFacebookEmailExists().then(e=>{r(T.a.FACEBOOK,e,t)},l):(f.a.attemptFacebookRegistration(t).then(()=>{this.contextLogSignupLoginEvent(7487);const{showResponseMessageModal:e}=this.props;e?e(!0):h.c.handleSignupRedirect(a||window.location.pathname,i)},l),this.contextLogSignupLoginEvent(7537))}),F(this,"navigateAfterLogin",()=>{const{showResponseMessageModal:e}=this.props;e?e(!0):h.c.handleRedirect(this.props.nextUrlParam||window.location.pathname)}),F(this,"renderTooltip",e=>e?this.props.useGestaltTooltip?i.a.createElement(u,{anchor:this._fallbackButton,message:e}):i.a.createElement("div",{style:A.tooltip},i.a.createElement(w.a,{message:e})):null)}handleMessageEvent(e){Object(R.h)(e,e=>Object(C.a)(`unauth_web.${e}`))}componentDidMount(){"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=this.checkLoginState,window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1,window.addEventListener("message",this.handleMessageEvent,!1));const{userAgent:e}=this.context;if("ios"!==e.platform&&"ipad"!==e.platform)setTimeout(()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}},50);else if(1!==window.fb_init&&2!==window.fb_init)this.initializeFB();else if(2===window.fb_init&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval(()=>{2===window.fb_init&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))},P)}this.props.isRerequest&&(this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam),window.removeEventListener("message",this.handleMessageEvent)}}onFacebookConnectSuccess(e){const{preventRegister:t,container:o,isBusiness:n=!1,requestContext:{seoUnauthExperiments:i}}=this.props;Object(C.a)("unauth_web.facebook_connect.manual.success");const a={facebook_id:e.id,facebook_token:e.access_token},r={container:o,hybridTier:this.context.hybridTier,page:this.context.pageType,is_business:n};Object(g.a)(a,r,i).then(()=>{Object(C.a)("login.facebook."+Object(L.b)()),this.contextLogSignupLoginEvent(7536),this.navigateAfterLogin()},e=>{if(this.contextLogSignupLoginEvent(7535),e.api_error_code===s.a.LOGIN_MFA_REQUIRED)Object(C.a)("login.facebook."+Object(L.b)()),this.props.onLoginWithMfa&&this.props.onLoginWithMfa(a,e.data);else if(e.api_error_code===s.a.LOGIN_USER_NOT_FOUND||e.api_error_code===s.a.FACEBOOK_ACCOUNT_NOT_LINKED){if(t)return void t(B);this.registerWithFacebook(e,r,a)}else e&&e.api_error_code&&Object(C.a)(`facebook_button.failed_login_${e.api_error_code}`),e.api_error_code===s.a.POLICY_VIOLATION_USER&&this.props.onLoginWithSuspended?this.props.onLoginWithSuspended():Object(O.a)(p.a._("Sorry, we can't log you in.","error message when user failed to login caused by suspend/deactivated etc.","error message when user failed to login caused by suspend/deactivated etc."))}),this.contextLogSignupLoginEvent(7534)}initializeFB(){const{requestContext:e}=this.props;null!==this.profilePicButton&&(void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():(window.fbAsyncInit=function(){window.FB.init({appId:_.a.settings.FACEBOOK_API_KEY,status:!0,xfbml:!0,version:"v2.7"})},((t,o,n)=>{const i=t.getElementsByTagName(o)[0];if(t.getElementById(n))return;const a=t.createElement(o);a.id=n,a.src="//connect.facebook.net/"+l.a.getLocaleString(e.locale)+"/sdk.js",i.parentNode&&i.parentNode.insertBefore(a,i)})(document,"script","facebook-jssdk")))}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback&&this.statusChangeCallback(e)}))}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(v.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:2}):(Object(v.a)(e,{signup_login_method:2}),Object(C.d)("press_facebook_login"),Object(C.a)("unauth_web.facebook_connect.manual.attempt"))}login(e){const{requestContext:{seoUnauthExperiments:t}}=this.props;return Object(g.a)(e,{container:"fbconnectbtn"},t).then(()=>{this.navigateAfterLogin()})}renderProfilePicButtonWithFallback(){const{type:e,isRerequest:t,showFallback:o,styleOverrides:n}=this.props,a=new x.c(this.props.requestContext,"mweb_web_unauth_lego_button").enabled(),s=a?"rounded":"default",l='<div class="fb-login-button" '+`data-scope="${R.b.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===e?"login_with":"continue_with"}" `+`data-use-continue-as="${"login"===e?"false":"true"}" `+'data-width="268px"'+`data-layout="${s}"`+'data-size="large"></div>',d='<div class="fb-login-button" '+`data-scope="${R.b.join(",")}" `+'onlogin="checkLoginState"'+`data-button-type="${"login"===e?"login_with":"continue_with"}" `+`data-layout="${s}"`+`data-use-continue-as="${"login"===e?"false":"true"}" `+'data-width="268px"data-auth-type="rerequest"data-size="large"></div>',{buttonText:u,inline:g}=this.props;let h=A.button;g&&(h={...h,width:"48%",display:"inline-block"}),o&&(h={...h,position:"relative"}),n&&n.button&&(h={...h,...n.button}),a&&(h={...h,borderRadius:"20px"});const m={...A.text,...n&&n.text||{}},b=A.fbProfileButton;return i.a.createElement("div",{ref:e=>{this._fallbackButton=e}},i.a.createElement(r.a,{className:"FacebookConnectButton",onClick:this.handleConnectClick,styleOverrides:h},i.a.createElement(c.c,{display:"flex"},i.a.createElement(c.c,{color:"white",dangerouslySetInlineStyle:A.fbLogo},i.a.createElement(c.n,{accessibilityLabel:p.a._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:19})),i.a.createElement("span",{style:m},u))),!o&&i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t?d:l},ref:e=>{this.profilePicButton=e},style:b}))}render(){const{styleOverrides:e}=this.props,t={...A.container,...e&&e.container||{}};return i.a.createElement("div",{style:t},this.renderProfilePicButtonWithFallback(),this.renderTooltip(this.props.tooltip))}}F(M,"contextTypes",{country:b.a.string,userAgent:b.a.shape({browserName:b.a.string.isRequired,platform:b.a.string.isRequired,raw:b.a.string.isRequired}).isRequired,hybridTier:b.a.string,pageType:b.a.string}),F(M,"defaultProps",{inline:!1,showFallback:!1});t.b=Object(k.compose)(j.e,Object(a.connect)(e=>({viewer:e.viewer})))(M)},Q0dO:function(e,t,o){var n=o("q1tI"),i=o("n6mq");t.a=({children:e,description:t,error:o,id:a,label:r,required:s,onLabelTouch:l})=>n.createElement(i.c,null,n.createElement(i.c,{marginBottom:1},n.createElement(i.q,{htmlFor:a},n.createElement(i.K,{color:o?"red":"darkGray"},r,s&&n.createElement(i.K,{color:"red",inline:!0,weight:"bold"},n.createElement("span",{"aria-hidden":"true"},"*"))))),e,(!!o||!!t)&&n.createElement(i.q,{htmlFor:a},n.createElement(i.c,{marginTop:1},l?n.createElement(i.P,{onTouch:l},n.createElement(i.K,{color:o?"red":"darkGray",size:"md"},o||t)):n.createElement(i.K,{color:o?"red":"darkGray",size:"md"},o||t))))},YGR8:function(e,t,o){o.d(t,"a",(function(){return s}));var n=o("q1tI"),i=o.n(n),a=o("Ye/N"),r=o("n6mq");const s=()=>i.a.createElement(r.t,{inline:!0,href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension"},a.a._("get in touch with us","link text shown to redirect to help.pinterest.com for appealing a suspension","link text shown to redirect to help.pinterest.com for appealing a suspension"))},Yhte:function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("q1tI"),i=o("dP5U"),a=o("Ye/N"),r=o("TiQD"),s=o("vvax"),l=o("YGR8"),c=o("n6mq");function d({onClose:e}){const t=a.a._("Your account is suspended for violating our community guidelines. We previously sent you an email explaining why and how to appeal. If you have questions, {{ help_link }}."),o=a.a._("Your account is suspended for violating our community guidelines. If you have questions, {{ help_link }}."),d=t||o;return n.createElement(r.b,{accessibilityModalLabel:a.a._("Login disabled for suspended account","Modal accessibility label for when a user tries to login with a suspended account","Modal accessibility label for when a user tries to login with a suspended account"),heading:a.a._("Your account has been suspended","Modal heading for user who have attempted to login with a suspended account","Modal heading for user who have attempted to login with a suspended account"),onDismiss:e,role:"alertdialog",size:"md"},n.createElement(c.c,{paddingX:6,marginBottom:4},n.createElement(c.c,{marginBottom:4},n.createElement(c.K,{inline:!0},Object(s.b)(d,{help_link:n.createElement(l.a,{key:"suspended user help_link"})}))),n.createElement(c.c,{marginTop:4},n.createElement(i.a,{color:"red",onClick:e,overrideText:a.a._("Got it","Acknowledge suspended account modal message","Acknowledge suspended account modal message")}))))}},a2Qh:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("JW66"),r=o("iFas"),s=o("Ye/N"),l=o("dP5U"),c=o("TiQD"),d=o("LSg/"),u=o("n6mq");function p(e){const t=s.a._("Reset password","Request a password reset email","Request a password reset email");return i.a.createElement(u.d,{accessibilityLabel:t,color:e.color||"red",inline:e.inline,onClick:()=>{Object(d.a)({usernameOrEmail:e.email,callBack:e.callBack})},text:e.overrideText||t})}var g=o("vvax");function h({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityModalLabel:s.a._("Login with Facebook or Google?","Modal accessibility label for when a user has failed login three times","Modal accessibility label for when a user has failed login three times"),heading:s.a._("Looks like youre having trouble logging in","Modal heading for user who have attempted to login three times","Modal heading for user who have attempted to login three times"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,null,n.createElement(u.K,null,Object(g.b)(s.a._("We sent an email to {{ email }} to help you get back in.","",""),{email:n.createElement(u.K,{inline:!0,key:"emailAddress",weight:"bold"},e)})),n.createElement(u.c,{paddingY:3},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email","Button to allow the user to request a password reset email")}))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login","Upsell to use Facebook or Google for login"))),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t}))))}function m({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityModalLabel:s.a._("Login limit reached","Modal accessibility label for users who have been login rate limited","Modal accessibility label for users who have been login rate limited"),heading:s.a._("Oops! Too fast","Modal heading for user who have been login rate limited","Modal heading for user who have been login rate limited"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:4,width:"100%",overflow:"hidden"},n.createElement(u.K,{inline:!0},s.a._("It looks like youre logging in a lot. Log in with Facebook or Google if youre connected, or reset your password. Or you can wait 30 minutes and try again.","Statement that the users is login limited","Statement that the users is login limited"))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,s.a._("Or log in with Facebook or Google.","Upsell to use Facebook or Google for login","Upsell to use Facebook or Google for login"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t,overrideText:s.a._("Ill wait","Button text acknowledging login rate limiting","Button text acknowledging login rate limiting")}))))}var b=o("N9+J");function _({email:e,loginWith:t,onClose:o,onPasswordResetSent:i}){return n.createElement(c.b,{accessibilityModalLabel:s.a._("No matching account","Modal accessibility label for account recovery","Modal accessibility label for account recovery"),heading:s.a._("Oops! Something went wrong","Modal heading","Modal heading"),onDismiss:o,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:6},t===b.a?n.createElement(u.K,null,s.a._("We couldnt match your Facebook account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login","Notice that no Pinterest account exists for the Facebook account used to attempt login")):n.createElement(u.K,null,s.a._("We couldnt match your Google account to any Pinterest account. Try resetting your password instead.","Notice that no Pinterest account exists for the Facebook account used to attempt login","Notice that no Pinterest account exists for the Facebook account used to attempt login"))),n.createElement(p,{email:e,callBack:i}),n.createElement(u.c,{marginTop:2},n.createElement(l.a,{onClick:o}))))}var w=o("kmwA");const f="?source=account_recovery";function E({email:e,onClose:t,onPasswordResetSent:o}){const i=s.a._("Password reset email sent","Modal label for confirmation of password reset send","Modal label for confirmation of password reset send");return n.createElement(c.b,{accessibilityModalLabel:i,heading:i,onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.K,{overflow:"normal"},Object(g.b)(s.a._("We sent instructions to pick a new password to {{ email }}.","Statement that a password reset email has been sent to the user","Statement that a password reset email has been sent to the user"),{email:n.createElement(u.K,{inline:!0,key:"emailAddress",overflow:"normal",weight:"bold"},e)})),n.createElement(u.c,{paddingY:4},n.createElement(p,{inline:!0,color:"gray",email:e,callBack:o,overrideText:s.a._("Resend email","Button to allow the user to request a password reset email","Button to allow the user to request a password reset email")})),n.createElement(u.c,null,n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,Object(g.b)(s.a._("Didnt get the email? Try these {{ tips }}","Direction to help center if the password reset email failed","Direction to help center if the password reset email failed"),{tips:n.createElement(u.t,{inline:!0,key:"helpCenterLink",target:"blank",href:w.a.settings.HELP_PASSWORD_RESET_URL+f},n.createElement(u.K,{inline:!0,key:"helpCenter",weight:"bold"},s.a._("tips from our Help Center","Link text to go to help center","Link text to go to help center")))}))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,Object(g.b)(s.a._("Not your email address? {{ tryAgain }}","Link to password reset flow for users who make an incorrect password reset request","Link to password reset flow for users who make an incorrect password reset request"),{tryAgain:n.createElement(u.t,{inline:!0,key:"passwordResetLink",href:w.a.settings.PASSWORD_RESET_URL},n.createElement(u.K,{inline:!0,key:"tryAgain",weight:"bold"},s.a._("Try another","Link text to enter the password reset flow for a different email address/username","Link text to enter the password reset flow for a different email address/username")))})))),n.createElement(u.c,null,n.createElement(l.a,{color:"red",onClick:t}))))}function k({email:e,onClose:t,onPasswordResetSent:o,socialButtons:i}){return n.createElement(c.b,{accessibilityModalLabel:s.a._("Recover your account","Modal accessibility label for account recovery","Modal accessibility label for account recovery"),heading:s.a._("We protected your account","Modal heading for user who need to recover their accounts","Modal heading for user who need to recover their accounts"),onDismiss:t,role:"alertdialog",size:"md"},n.createElement(u.c,{paddingX:6,marginBottom:4},n.createElement(u.c,{marginBottom:4},n.createElement(u.K,{inline:!0},s.a._("We noticed some strange activity on your Pinterest account so we reset your password and logged everyone out (including you).","Statement that we detected suspicious activity","Statement that we detected suspicious activity"))),n.createElement(u.c,{marginBottom:4},n.createElement(u.K,null,s.a._("Reset your password or log in with Facebook or Google to get back into your account","Prompt to take action to reset password or upsell login with Facebook/Google","Prompt to take action to reset password or upsell login with Facebook/Google"))),n.createElement(p,{email:e,callBack:o}),i,n.createElement(u.c,{marginTop:4},n.createElement(l.a,{onClick:t}))))}var y=o("Yhte"),S=o("CvCA"),O=o("D8pe"),x=o("NSVK");function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,"a",(function(){return L})),o.d(t,"b",(function(){return C}));const L={[a.a.API_LIMIT_EXCEEDED_ERROR]:x.b.RATE_LIMITED,[a.a.API_EVENT_BLOCKED_ERROR]:x.b.RATE_LIMITED,[a.a.USER_IN_SAFE_MODE]:x.b.SOFT_BANNED,[a.a.POLICY_VIOLATION_USER]:x.b.SUSPENDED,[a.a.LOGIN_BAD_PASSWORD_ASK_RESET]:x.b.LOGIN_ASSISTANCE,[a.a.LOGIN_HARD_BANNED_USER]:x.b.SOFT_BANNED,[a.a.RESPONSE_CODE_TOO_MANY_REQUESTS]:x.b.RATE_LIMITED};class C extends n.Component{constructor(...e){super(...e),v(this,"state",{showToast:!1}),v(this,"dismissModal",()=>{this.props.updateAccountRecoveryModal(null)}),v(this,"showPasswordResetSent",()=>this.props.updateAccountRecoveryModal(x.b.PASSWORD_RESET_SENT)),v(this,"showLoginWithFailed",e=>{e===b.a?this.props.updateAccountRecoveryModal(x.b.PREVENT_FACEBOOK_REGISTER):e===O.a&&this.props.updateAccountRecoveryModal(x.b.PREVENT_GOOGLE_REGISTER)}),v(this,"toggleToast",()=>this.setState(e=>({showToast:!e.showToast}))),v(this,"renderSocialButtons",()=>n.createElement(u.c,null,n.createElement(b.b,{buttonText:s.a._("Continue with Facebook","Facebook login button text","Facebook login button text"),container:r.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,showFallback:!0,preventRegister:this.showLoginWithFailed}),n.createElement(u.c,{marginTop:1},n.createElement(O.b,{container:r.a.ACCOUNT_RECOVERY,disablePostSignupNextUrl:!0,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.props.onLoginWithSuspended,preventRegister:this.showLoginWithFailed,onLoginWithVoluntarilyDeactivated:e=>{this.dismissModal(),this.props.onLoginWithVoluntarilyDeactivated&&this.props.onLoginWithVoluntarilyDeactivated(e)}}))))}render(){const{email:e,modalType:t}=this.props,o={email:e,onClose:this.dismissModal,onPasswordResetSent:this.showPasswordResetSent},i={...o,socialButtons:this.renderSocialButtons()};switch(t){case x.b.SUSPENDED:return n.createElement(y.a,{onClose:this.dismissModal});case x.b.LOGIN_ASSISTANCE:return n.createElement(h,i);case x.b.RATE_LIMITED:return n.createElement(m,i);case x.b.SOFT_BANNED:return n.createElement(k,i);case x.b.PREVENT_FACEBOOK_REGISTER:return n.createElement(_,Object.assign({},o,{loginWith:b.a}));case x.b.PREVENT_GOOGLE_REGISTER:return n.createElement(_,Object.assign({},o,{loginWith:O.a}));case x.b.PASSWORD_RESET_SENT:return n.createElement(n.Fragment,null,n.createElement(E,Object.assign({},o,{onPasswordResetSent:this.toggleToast})),this.state.showToast&&n.createElement(u.c,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed"},n.createElement(S.a,{onHide:this.toggleToast,text:s.a._("Email sent!"),duration:3500})));default:return null}}}},bKKl:function(e,t,o){o.d(t,"h",(function(){return i})),o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return r})),o.d(t,"g",(function(){return s})),o.d(t,"e",(function(){return l})),o.d(t,"f",(function(){return c})),o.d(t,"d",(function(){return d})),o.d(t,"a",(function(){return u}));var n=o("gxu6");const i=()=>(()=>!!n.a("logged_out"))()||!!n.a("fba"),a=105,r=78,s=30,l=77,c=1402,d=79,u=101},dP5U:function(e,t,o){o.d(t,"a",(function(){return s}));var n=o("q1tI"),i=o.n(n),a=o("Ye/N"),r=o("n6mq");function s({color:e,onClick:t,overrideText:o}){const n=o||a.a._("Got it","Acknowledge protected account modal message","Acknowledge protected account modal message");return i.a.createElement(r.d,{accessibilityLabel:n,color:e||"gray",onClick:t,text:n})}},i7x9:function(e,t,o){var n=o("q1tI"),i=o("JW66"),a=o("Ye/N"),r=o("LSg/"),s=o("4cpq"),l=o("28DW"),c=o("vvax"),d=o("n6mq");t.a=({api_error_code:e,errorMessage:t,handleTouch:o,userSearch:u})=>{const p=e=>((e,t,o)=>n.createElement("button",{style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",onClick:()=>{Object(l.a)("unauth_password_reset_link_tapped"),Object(r.a)({usernameOrEmail:t,callBack:o})}},n.createElement(d.K,{color:"red",inline:!0,key:"err_text",size:"md",weight:"bold"},e)))(e,u,o),g=(e=>{switch(e){case i.a.API_EVENT_BLOCKED_ERROR:case i.a.API_LIMIT_EXCEEDED_ERROR:case i.a.RESPONSE_CODE_TOO_MANY_REQUESTS:return Object(c.b)(a.a._("Youve entered a lot of incorrect passwords. To get back into your account, {{ resetPasswordLink }}. Or you can wait 30 minutes and try again.","Error message when login limited","Error message when login limited"),{resetPasswordLink:p(a.a._("reset your password","Link text for password reset","Link text for password reset"))});case i.a.LOGIN_HARD_BANNED_USER:case i.a.USER_IN_SAFE_MODE:return Object(c.b)(a.a._("We noticed some strange activity on your account.  {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.","Error message when user is soft banned","Error message when user is soft banned"),{resetPasswordLink:p(a.a._("Reset your password","Link text for password reset","Link text for password reset"))});case i.a.INVALID_PASSWORD_GOOGLE_USER:return Object(c.b)(a.a._("Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:p(a.a._("set a password.","Link text to set password for user with account with only google auth","Link text to set password for user with account with only google auth"))});case i.a.INVALID_PASSWORD_FB_USER:return Object(c.b)(a.a._("Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}"),{resetPasswordLink:p(a.a._("set a password.","Link text to set password for user with account with only facebook auth","Link text to set password for user with account with only facebook auth"))});case i.a.INVALID_PASSWORD_SIWA_USER:return Object(c.b)(a.a._("Your account is connected to Apple. This option works only on the Pinterest iOS app. To log into Pinterest here, youll need to {{ resetPasswordLink }}","unauth.web.emailLogin","Error message displayed to users who are connected to Apple, but do not have a password"),{resetPasswordLink:p(a.a._("set a password.","Link text to set password for user with account with only apple auth","Link text to set password for user with account with only apple auth"))});case i.a.INVALID_PASSWORD_ERROR_CODE:return Object(c.b)(a.a._("The password you entered is incorrect. Try again or {{ resetPasswordLink }}"),{resetPasswordLink:p(a.a._("Reset your password","Link text for password reset","Link text for password reset"))});default:return[t]}})(e);return n.createElement(s.a,{id:"touchableErrorMessage"},g.map((e,t)=>n.createElement(d.K,{inline:!0,color:"red",size:"md",key:`err_message_${t}`},e)))}},inSI:function(e,t,o){t.a=(e,t)=>{let o;return t.some(t=>{const n=t(e);return n.errors.length>0&&(o=n.errors[0],!0)}),o}},kL1e:function(e,t,o){o.d(t,"a",(function(){return s}));var n=o("q1tI"),i=o.n(n),a=o("Ye/N");const r={alternativesSeparator:{marginBottom:"16px",marginTop:"16px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold"}};function s({css:e={},signupSeparatorContinuous:t=!1,text:o}){const n=Object.assign({},r.alternativesSeparator,e);return i.a.createElement("p",{className:t?"AlternativesSeparatorContinuous":"",style:n},o||a.a._("OR"))}},mt4P:function(e,t,o){var n=o("q1tI"),i=o.n(n),a=o("F3od"),r=o("Ye/N"),s=(o("17x9"),o("zUH3")),l=o("a0jO"),c=o("n6mq");function d(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const u={input:{backgroundColor:"#fff",border:"solid 1px #ccc",WebkitBoxShadow:"none",boxShadow:"none",position:"relative",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",borderRadius:"3px",fontWeight:"bold",padding:"10px",WebkitBoxSizing:"border-box",boxSizing:"border-box",width:"100%",color:"#333",fontSize:"14px"},fieldset:{position:"relative"},errorIcon:{position:"absolute",right:"14px",top:"14px"},tooltipText:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"},suggestedEmailSpan:{whiteSpace:"nowrap"},suggestedEmailLink:{display:"inline-block",font:"inherit",fontWeight:"bold",fontSize:"14",color:"#fff",cursor:"pointer",textDecoration:"underline",verticalAlign:"top",outline:"none",outlineOffset:"0"},fieldTitle:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",color:"#333",float:"left",fontFamily:l.b,fontSize:"16px",fontStyle:"normal",fontWeight:"bold",margin:"15px 0px 5px 3px"},suggestedEmailTooltip:{width:"match-content"}};class p extends n.Component{constructor(e,t){super(e,t),d(this,"renderErrorIcon",e=>{if(e)return i.a.createElement("div",{className:"InputField__errorIcon",style:u.errorIcon},i.a.createElement(c.n,{accessibilityLabel:r.a._("Remove","Accessible label for error icon","Accessible label for error icon"),color:"red",icon:"remove",inline:!0,size:14}))}),d(this,"renderTooltip",(e,t)=>{if(e&&t)return i.a.createElement(s.a,{message:e})}),d(this,"renderGestaltInputField",()=>{const{autoComplete:e,disabled:t,domainError:o,id:n,inputRef:r,name:s,onBlur:l,onChange:d,onFocus:u,placeholder:p,type:g,updateEmail:h,useExperimentalTextfield:m,value:b}=this.props,_=this.props.hasError||this.props.tooltip?this.props.tooltip:"";return m?i.a.createElement(a.a,{disabled:t,error:o||_,id:n,name:s,onBlur:l,onChange:({event:e})=>{d(e)},onFocus:u,placeholder:p,ref:e=>{this._gestaltInput=e,r&&r(e)},type:g,onLabelTouch:h,value:b}):i.a.createElement(c.M,{autoComplete:e,disabled:t,errorMessage:_,id:n,name:s,onBlur:l,onChange:({event:e})=>{d(e)},onFocus:u,placeholder:p,ref:e=>{this._gestaltInput=e,r&&r(e)},size:"lg",type:g,updateEmail:h,value:b})}),this.state={initialFocus:this.props.focused||!1,gainFocus:!1}}componentDidMount(){this.state.initialFocus&&this.focusInput()}UNSAFE_componentWillReceiveProps(e){const{domainError:t,type:o}=this.props;e.hasError&&!1===this.props.hasError?this.setState({gainFocus:!0}):this.setState({gainFocus:!1}),t&&o&&"email"===o&&this.setState({shouldTooltipOpen:!0})}componentDidUpdate(){this.state.gainFocus&&this.focusInput()}focusInput(){this._input&&this._input.focus(),this._gestaltInput&&this._gestaltInput.textfield&&this._gestaltInput.textfield.focus()}renderVanillaTextInputField(e,t){return i.a.createElement("div",null,i.a.createElement("input",{"aria-label":this.props.accessibilityLabel||this.props.placeholder,autoComplete:this.props.autoComplete,className:e,name:this.props.name,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onChange:this.props.onChange,onClick:this.props.onClick,placeholder:this.props.placeholder,ref:e=>{this._input=e,this.props.inputRef&&this.props.inputRef(e)},style:t,type:this.props.type,value:this.props.value}),this.renderErrorIcon(this.props.hasError),this.renderTooltip(this.props.tooltip,this.props.hasError))}render(){let e=u.input;this.props.inputStyleOverrides&&(e={...e,...this.props.inputStyleOverrides});let t=u.fieldset;this.props.fieldsetStyleOverrides&&(t={...t,...this.props.fieldsetStyleOverrides});let o="";return"gray"===this.props.placeholderColor?o="UnauthTextInputField__gray":"darkGray"===this.props.placeholderColor&&(o="UnauthTextInputField__darkGray"),i.a.createElement("fieldset",{className:this.props.classNames,style:t},this.props.inputFieldTitle?i.a.createElement("div",{style:u.fieldTitle},this.props.inputFieldTitle):null,this.props.useGestalt?this.renderGestaltInputField():this.renderVanillaTextInputField(o,e))}}p.defaultProps={autoComplete:"on",hasError:!1},t.a=p},"pz/u":function(e,t,o){o.d(t,"a",(function(){return d}));var n=o("q1tI"),i=o.n(n);const a={background:"none",border:"none",padding:"0",textAlign:"left"},r={border:"0px",height:"36px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",outline:"none",WebkitBoxShadow:"none",boxShadow:"none",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center"},s=(e,t)=>e?{backgroundColor:"#efefef",color:"#767676"}:t.includes("red")?{backgroundColor:"#e60023",color:"#fff"}:t.includes("lightGrey")?{backgroundColor:"#ebebeb",color:"#444"}:t.includes("darkGrey")?{backgroundColor:"#333",color:"#fff"}:t.includes("white")?{backgroundColor:"#fff",color:"#444"}:t.includes("blueText")?{backgroundColor:"#fff",color:"#0074e8"}:t.includes("transparent")||t.includes("blueTransparent")?{backgroundColor:"transparent",border:"1px solid #fff",color:"#fff"}:{},l=({disabled:e,loading:t,width:o})=>t?{cursor:"default",...o?{width:o}:{}}:e?{cursor:"not-allowed"}:{},c=({classArray:e,disabled:t,loading:o,styleOverrides:n,width:i})=>({...e.includes("noButtonStyles")?a:{...r,...s(t,e)},...n,...l({disabled:t,loading:o,width:i})});function d({accessibilityLabel:e,children:t,className:o,disabled:a,href:r,id:s,loading:l,onClick:d,styleOverrides:u,type:p}){const g=Object(n.useRef)(null),[h,m]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=g.current;if(e){const t=e.style||{};m(e.getBoundingClientRect().width+parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0))}},[]);const b=(o||"").split(" ").concat(l||a?[]:["active"]);return i.a.createElement("button",{"aria-label":e||"",className:b.join(" "),disabled:a,href:r,id:s,onClick:d,ref:g,style:c({classArray:b,disabled:a||!1,loading:l||!1,styleOverrides:u,width:h}),type:p||"button"},l?i.a.createElement("div",{className:"loadingSpinner",style:{padding:"0 10px",position:"relative"}}):t)}},sgOq:function(e,t,o){t.a={request:51,requestBegin:6935,requestEnd:6936}},xRaM:function(e,t,o){o.d(t,"b",(function(){return i})),o.d(t,"c",(function(){return a})),o.d(t,"d",(function(){return r})),o.d(t,"a",(function(){return s}));var n=o("Ye/N");function i(e){return e.socialNetwork&&e.socialNetwork.facebook&&e.socialNetwork.facebook.connected}function a(e){return e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected}function r(e){return!(e.hasPassword||a(e)||i(e))}const s=()=>n.a._("You're almost there! Log in to access all of Pinterest","loginModal.limitedLogin.subheader","Subheader text on personalized login modal/flyout to remind users to log in")},zUH3:function(e,t,o){o.d(t,"a",(function(){return a}));var n=o("q1tI");const i={invisibleWrapper:{top:"0px",width:"215px"},message:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},suggestionTooltipMessage:{boxShadow:"none",background:"#E2780D",color:"#fff",fontSize:"14px",WebkitBoxShadow:"none"},text:{overflowWrap:"break-word",wordWrap:"break-word"}};function a({message:e,customWrapperStyles:t,isSuggestionTooltip:o,children:a}){let r="Tooltip_message";o&&(r="Tooltip_suggestionMessage");const s={...i.invisibleWrapper,...t},l=o?{...i.message,...i.suggestionTooltipMessage}:i.message;return n.createElement("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:s},n.createElement("div",{className:r,style:l},a?n.createElement("span",{style:i.text},a):n.createElement("span",{dangerouslySetInnerHTML:{__html:e},style:i.text})),n.createElement("div",null))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-5-fda488d719f9ff690c08.mjs.map
